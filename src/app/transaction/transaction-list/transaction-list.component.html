<div class="container">
    <div class="container-header">
        <label for="title title-dark-light">{{'My transactions' | translate}}</label>
        <p-button label="{{'Create' | translate}}" icon="pi pi-plus" [rounded]="true" severity="success"
            (onClick)="createTransaction()" />
    </div>
    <div class="card">
        <p-table class="transactions-table" [value]="transactionData" [rows]="page"
            [tableStyle]="{ 'min-width': '50rem' }" size="small">
            <ng-template #caption>
                <p-iconfield>
                    <p-inputicon styleClass="pi pi-search" />
                    <input type="text" pInputText [formControl]="searchControl" placeholder="{{'Search' | translate}}"
                        pSize="small" />
                </p-iconfield>
            </ng-template>
            <ng-template #header class="table-header">
                <tr>
                    <th>{{'Origin Bank' | translate}}</th>
                    <th>{{'Destination Bank' | translate}}</th>
                    <th>{{'Category' | translate}}</th>
                    <th>{{'Description' | translate}}</th>
                    <th>{{'Amount' | translate}}</th>
                    <th>{{'Date' | translate}}</th>
                    <th></th>
                </tr>
            </ng-template>
            <ng-template #body let-transaction>
                @if (!loading()) {
                <tr>
                    <td>{{ transaction.bankAccountOrigin.name }}</td>
                    <td>{{ transaction.bankAccountDestination == null ? '-' : transaction.bankAccountDestination.name }}
                    </td>
                    <td>{{ transaction.category.description }}</td>
                    <td>{{ transaction.description }}</td>
                    <td>{{ transaction.amount | currency: authService.currentCurrency()?.code: 'symbol':
                        authService.currentCurrency()?.digits : authService.currentCurrency()?.locale }}</td>
                    <td>{{ transaction.date | date: 'dd/MM/yyyy' }}</td>
                    <td>
                        <p-menu #menu [model]="items" [id]="transaction.id" [popup]="true" [appendTo]="'body'" />
                        <p-button (click)="openToggle(menu, $event, transaction.id)" icon="pi pi-ellipsis-v" />
                    </td>
                </tr>
                } @else {
                <tr>
                    <td colspan="7">
                        <app-row-table-skeleton [columns]="1" [rows]="1"></app-row-table-skeleton>
                    </td>
                </tr>
                }
            </ng-template>
        </p-table>

        <div class="card flex justify-center">
            <p-paginator (onPageChange)="onPagination($event)" [first]="0" [rows]="pageSize"
                [totalRecords]="totalElements" [rowsPerPageOptions]="[2, 5, 10]" />
        </div>
    </div>
</div>